<!doctype html>
<title>IoT Home</title>
<script src="/static/d3-3.5.3/d3.min.js"></script>
<script src="/static/jquery-2.1.3/jquery.min.js"></script>
<script src="/static/metrics-graphics-2.0.0/metricsgraphics.min.js"></script>
<script src="/static/metrics-graphics-2.0.0/metricsgraphics.min.js"></script>
<link type="text/css" rel="stylesheet" href="/static/metrics-graphics-2.0.0/metricsgraphics.css">

<div id="chart"></div>

<h3>Data!</h3>
<div id="data"></div>

<script>
$(document).ready(function() {
d3.json('/metrics/device.53ff6e066678505531492367.temp?from1420058803&until=2420059163', function(response) {
    var data = [];
    console.log(response);
    for (key in response.data) {
        var date = new Date(0);
        var value = response.data[key];
        date.setSeconds(parseInt(key));
        console.log(key, value);
        data.push({date: date, value: value});
        $("<p>" + date + " " + value + "</p>").appendTo("#data");

    }
    console.log(data);
    MG.data_graphic({
        title: "Temperature",
        description: "Temperature",
        data: data,
        width: 650,
        height: 150,
        target: '#chart',
        min_y_from_data: true,
    })
})});

</script>

